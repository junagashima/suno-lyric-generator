# 🎯 楽曲分析→SUNO展開システム実装計画

## Phase 0: 設計・準備 ✅ 完了
- [x] データ構造定義（/src/types/analysis.ts）
- [x] システムバックアップ作成
- [x] 実装順序確定

## Phase 1: バックエンドAPI再構築（2-3時間予定）

### 1-1: /api/decompose新規作成 (45分)
**目的**: 生分析結果からSUNO要素への分解
**依存**: なし（独立した新機能）
**リスク**: 低（既存システムに影響なし）

### 1-2: /api/analyze改修 (30分)
**目的**: 生分析結果の出力追加  
**依存**: 1-1完了後（decompose APIとの連携）
**リスク**: 中（既存機能への影響可能性）

### 1-3: /api/generate-lyrics大幅改修 (60分)  
**目的**: 新データ構造対応、こだわりモード削除
**依存**: 1-1, 1-2完了後
**リスク**: 高（メイン機能の大幅変更）

### 1-4: /api/regenerate-style新規作成 (30分)
**目的**: スタイル指示のみ再生成
**依存**: 1-3完了後
**リスク**: 低（追加機能）

## Phase 2: フロントエンド再構築（2-3時間予定）

### 2-1: SongGeneratorForm.tsx改修
**目的**: 新フロー対応、こだわりモード削除
**依存**: Phase 1完了
**リスク**: 高（UI大幅変更）

### 2-2: 新規コンポーネント作成
**目的**: 段階的フロー用UI
**依存**: 2-1進行中
**リスク**: 中（新機能追加）

## 安全対策
1. **各段階での動作確認**: API単体 → 統合 → UI
2. **ロールバック準備**: バックアップからの即座復旧
3. **段階的コミット**: 各機能完成時点でコミット
4. **エラー監視**: 各段階での品質チェック

## 現在の状況
- **現在のPhase**: Phase 0 完了 → Phase 1 開始準備完了
- **次の作業**: Phase 1-1 /api/decompose新規作成
- **推定残り時間**: 6-8時間